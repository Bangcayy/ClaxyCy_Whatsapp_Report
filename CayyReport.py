import base64
exec(base64.b64decode('aW1wb3J0IHJlcXVlc3RzCmZyb20gYnM0IGltcG9ydCBCZWF1dGlmdWxTb3VwCmltcG9ydCB0aW1lCmltcG9ydCBvcwppbXBvcnQgcmFuZG9tCmltcG9ydCBzdHJpbmcKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKCmRlZiBiYW5uZXIoKToKICAgICIiIk1lbmFtcGlsa2FuIGhlYWRlciBkZW5nYW4gZWZlayB3YXJuYSBkYW4gYW5pbWFzaS4iIiIKICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgb3Muc3lzdGVtKCdlY2hvICJcbkNsYXh5Q3kgUmVwb3J0IiB8IGxvbGNhdCcpCiAgICBvcy5zeXN0ZW0oJ2VjaG8gIkF1dGhvcjogQ2F5eVxuVGVsZWdyYW06IEBiYW5nY2F5ZzU3XG4iIHwgbG9sY2F0JykKCmRlZiBnZW5lcmF0ZV9yYW5kb21fZW1haWwoKToKICAgICIiIk1lbWJ1YXQgZW1haWwgYWNhayBqaWthIHNjcmFwaW5nIGdhZ2FsLiIiIgogICAgZG9tYWlucyA9IFsnZ21haWwuY29tJywgJ3lhaG9vLmNvbScsICdvdXRsb29rLmNvbSddCiAgICByYW5kb21fdXNlciA9ICcnLmpvaW4ocmFuZG9tLmNob2ljZXMoc3RyaW5nLmFzY2lpX2xvd2VyY2FzZSArIHN0cmluZy5kaWdpdHMsIGs9MTApKQogICAgcmV0dXJuIGYie3JhbmRvbV91c2VyfUB7cmFuZG9tLmNob2ljZShkb21haW5zKX0iCgpkZWYgc2NyYXBlX2VtYWlsKHBob25lX251bWJlcik6CiAgICAiIiJTY3JhcGUgZW1haWwgdGVya2FpdCBub21vciB0ZWxlcG9uLiIiIgogICAgc2VhcmNoX3VybCA9IGYiaHR0cHM6Ly93d3cudHJ1ZWNhbGxlci5jb20vaWQtaWQvc2VhcmNoL2lkL3twaG9uZV9udW1iZXJ9IiAgIyBTZXN1YWlrYW4gZGVuZ2FuIFVSTCBsb29rdXAKICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAnCiAgICB9CiAgICB0cnk6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoc2VhcmNoX3VybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIHJlc3BvbnNlLnJhaXNlX2Zvcl9zdGF0dXMoKQogICAgICAgIHNvdXAgPSBCZWF1dGlmdWxTb3VwKHJlc3BvbnNlLnRleHQsICdodG1sLnBhcnNlcicpCiAgICAgICAgZW1haWwgPSBzb3VwLmZpbmQoJ2EnLCBocmVmPVRydWUsIHN0cmluZz1sYW1iZGEgeDogeCBhbmQgJ0AnIGluIHgpCiAgICAgICAgcmV0dXJuIGVtYWlsLnRleHQgaWYgZW1haWwgZWxzZSBnZW5lcmF0ZV9yYW5kb21fZW1haWwoKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJldHVybiBnZW5lcmF0ZV9yYW5kb21fZW1haWwoKQoKZGVmIHJlcG9ydF9udW1iZXIocGhvbmVfbnVtYmVyLCBkZXNjcmlwdGlvbik6CiAgICAiIiJNZWxhcG9ya2FuIG5vbW9yIHRlbGVwb24uIiIiCiAgICBlbWFpbCA9IHNjcmFwZV9lbWFpbChwaG9uZV9udW1iZXIpCiAgICByZXBvcnRlcl9uYW1lID0gIkFub255bW91cyIKICAgIHJlcG9ydF91cmwgPSAiaHR0cHM6Ly9hZHVhbm5vbW9yLmlkL2FwaS9yZXBvcnQiICAjIFVSTCBwZWxhcG9yYW4KICAgIGhlYWRlcnMgPSB7CiAgICAgICAgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAnLAogICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0KICAgIGRhdGEgPSB7CiAgICAgICAgJ3Bob25lX251bWJlcic6IHBob25lX251bWJlciwKICAgICAgICAncmVwb3J0ZXJfbmFtZSc6IHJlcG9ydGVyX25hbWUsCiAgICAgICAgJ2VtYWlsJzogZW1haWwsCiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogZGVzY3JpcHRpb24sCiAgICAgICAgJ2NhdGVnb3J5JzogJ1BlbmlwdWFuJwogICAgfQoKICAgIHRyeToKICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLnBvc3QocmVwb3J0X3VybCwgaGVhZGVycz1oZWFkZXJzLCBqc29uPWRhdGEpCiAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICBvcy5zeXN0ZW0oZidlY2hvICJb4pyTXSBOb21vciB7cGhvbmVfbnVtYmVyfSBiZXJoYXNpbCBkaWxhcG9ya2FuIGRlbmdhbiBlbWFpbCB7ZW1haWx9LiIgfCBsb2xjYXQnKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG9zLnN5c3RlbShmJ2VjaG8gIlshXSBHYWdhbCBtZWxhcG9ya2FuIG5vbW9yLiBLb2RlIHN0YXR1czoge3Jlc3BvbnNlLnN0YXR1c19jb2RlfSIgfCBsb2xjYXQnKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIG9zLnN5c3RlbShmJ2VjaG8gIlshXSBLZXNhbGFoYW4gamFyaW5nYW46IHtlfSIgfCBsb2xjYXQnKQoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIGJhbm5lcigpCiAgICBwaG9uZV9udW1iZXIgPSBpbnB1dCgiTWFzdWtrYW4gbm9tb3IgdGVsZXBvbiB1bnR1ayBkaWxhcG9ya2FuOiAiKQogICAgZGVzY3JpcHRpb24gPSBpbnB1dCgiTWFzdWtrYW4gZGVza3JpcHNpIGxhcG9yYW46ICIpCiAgICB0cnk6CiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgcmVwb3J0X251bWJlcihwaG9uZV9udW1iZXIsIGRlc2NyaXB0aW9uKQogICAgICAgICAgICB0aW1lLnNsZWVwKDUpICAjIFdha3R1IHR1bmdndSBhbnRhciBsYXBvcmFuCiAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgb3Muc3lzdGVtKCdlY2hvICJbIV0gUGVsYXBvcmFuIGRpaGVudGlrYW4gb2xlaCBwZW5nZ3VuYS4iIHwgbG9sY2F0JykK'))